<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Containers - LibrarianLib</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../librarianlib.html"><strong aria-hidden="true">1.</strong> LibrarianLib</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reading_kotlin.html"><strong aria-hidden="true">1.1.</strong> Reading Kotlin cheat sheet</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Foundation</li><li class="chapter-item expanded "><a href="../../foundation/index.html"><strong aria-hidden="true">2.</strong> Foundation</a></li><li class="chapter-item expanded "><a href="../../foundation/basemod.html"><strong aria-hidden="true">3.</strong> BaseMod</a></li><li class="chapter-item expanded "><a href="../../foundation/registration_manager/index.html"><strong aria-hidden="true">4.</strong> Registration Manager</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../foundation/registration_manager/items.html"><strong aria-hidden="true">4.1.</strong> Items</a></li><li class="chapter-item expanded "><a href="../../foundation/registration_manager/blocks.html"><strong aria-hidden="true">4.2.</strong> Blocks</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.3.</strong> Base Blocks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.4.</strong> Block Collections</div></li><li class="chapter-item expanded "><a href="../../foundation/registration_manager/tile_entities.html"><strong aria-hidden="true">4.5.</strong> Tile Entities</a></li><li class="chapter-item expanded "><a href="../../foundation/registration_manager/containers.html"><strong aria-hidden="true">4.6.</strong> Containers</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.7.</strong> Entities</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.8.</strong> Capabilities</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Facade</li><li class="chapter-item expanded "><a href="../../facade/index.html"><strong aria-hidden="true">5.</strong> Facade</a></li><li class="chapter-item expanded "><a href="../../facade/getting_started/index.html"><strong aria-hidden="true">6.</strong> Getting started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../facade/getting_started/hello_square.html"><strong aria-hidden="true">6.1.</strong> Hello, Square!</a></li><li class="chapter-item expanded "><a href="../../facade/getting_started/all_the_squares.html"><strong aria-hidden="true">6.2.</strong> All the Squares</a></li><li class="chapter-item expanded "><a href="../../facade/getting_started/squares_all_the_way_down.html"><strong aria-hidden="true">6.3.</strong> Squares All the Way Down</a></li></ol></li><li class="chapter-item expanded "><a href="../../facade/guessing_game.html"><strong aria-hidden="true">7.</strong> Creating a Guessing Game</a></li><li class="chapter-item expanded "><a href="../../facade/layers/index.html"><strong aria-hidden="true">8.</strong> Layers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../facade/layers/transforms.html"><strong aria-hidden="true">8.1.</strong> Transforms</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Events</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> IMValue/RMValue</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Self-layout</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Input</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> mouseOver</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Keyboard Input</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Animation</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Basics</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Keyframes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Lerpers</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Advanced topics</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> Clipping and Render to Texture</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> Opacity</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Masks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Blend Modes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> Tooltips</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Yoga Layout</div></li></ol></li><li class="chapter-item expanded "><a href="../../facade/containers/index.html" class="active"><strong aria-hidden="true">12.</strong> Containers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../facade/containers/non_inventory.html"><strong aria-hidden="true">12.1.</strong> Non-Inventory Containers</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.2.</strong> Woo boy…</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Other modules</li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> Core</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">13.1.</strong> Useful Shit</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.2.</strong> Math?</div></li></ol></li><li class="chapter-item expanded "><a href="../../glitter/index.html"><strong aria-hidden="true">14.</strong> Glitter</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> Albedo</div></li><li class="chapter-item expanded "><a href="../../courier/index.html"><strong aria-hidden="true">16.</strong> Courier</a></li><li class="chapter-item expanded "><a href="../../etcetera/index.html"><strong aria-hidden="true">17.</strong> Etcetera</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../etcetera/event_bus.html"><strong aria-hidden="true">17.1.</strong> Event Bus</a></li><li class="chapter-item expanded "><a href="../../etcetera/raycasting.html"><strong aria-hidden="true">17.2.</strong> Raycasting</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">18.</strong> Mirage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">19.</strong> Mosaic</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">19.1.</strong> Sprites</div></li></ol></li><li class="chapter-item expanded "><a href="../../prism/index.html"><strong aria-hidden="true">20.</strong> Prism</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../prism/refract_class.html"><strong aria-hidden="true">20.1.</strong> @RefractClass</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.</strong> Woo boy…</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">LibrarianLib</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#containers" id="containers">Containers</a></h1>
<p>Containers are used wherever you need a GUI to do something on the server. This can be
accessing an inventory, configuring a block or item, or anything in between.</p>
<h2><a class="header" href="#container-classes" id="container-classes">Container classes</a></h2>
<p>Facade containers must have a single constructor. That constructor’s parameters must 
begin with <code>int windowId, PlayerEntity player</code>, followed by any number of 
<a href="/prism">Prism</a>-serializable parameters. This constructor should not be called 
directly, only indirectly via the <code>FacadeContainerType</code>‘s <code>open</code> method.</p>
<h2><a class="header" href="#opening-containers" id="opening-containers">Opening containers</a></h2>
<p>To open a container you call the <code>FacadeContainerType.open(player, title, args...)</code> 
method, passing the player, title, and the extra arguments in the container’s 
constructor. Those arguments are used to call the container’s constructor on the server, 
then serialized and sent to the client so it can create an identical container.</p>
<p>Note that containers can only be opened on the server.</p>
<p>When possible, you should pass specific values to the constructor instead of relying on 
it to get those values itself. For example, pass tile entity locations directly (you 
can’t pass the tile entity itself), instead of having the client deduce what block the 
player is looking at.</p>
<h2><a class="header" href="#container-communication" id="container-communication">Container communication</a></h2>
<p>Inventories in containers will automatically sync, but for manual/direct communication
between the client and the server, use messages. To create a message, create a method
with any number of Prism-serializable parameters and annotate it with <code>@Message</code>. </p>
<p>To send a message from one side to the other (either the server container to the client 
or the client container to the server), call <code>sendMessage</code>, passing the method name and 
the arguments to pass to it. The arguments will be serialized into a packet, sent over
the network, and then the <code>@Message</code> method will be called.</p>
<p><em><strong>NOTE!</strong></em> These messages are still packets, so it’s vital you take the 
<a href="/courier#trust">same precautions</a> as you would with any client-to-server 
communication.</p>
<pre><code class="language-java">public class CoolContainer extends FacadeContainer {
    // in the container
    @Message
    private void doThing(String thing, int value) {
        // do something on the server
        this.sendMessage(&quot;serverToldMe&quot;, thing + &quot; done&quot;);
    }

    @Message
    private void serverToldMe(String data) {
        // do something on the client, maybe update a field in a &quot;value changed&quot; message
        // this.sendMessage(&quot;doThing&quot;, ...); // we can send messages to the server too
    }
}

public class CoolContainerScreen extends ... {
    private void doThingButtonClicked() {
        this.container.sendMessage(&quot;doThing&quot;, &quot;wow&quot;, 42);
    }
}
</code></pre>
<h2><a class="header" href="#container-registration" id="container-registration">Container registration</a></h2>
<p>If you’re using <a href="/foundation">Foundation</a>, the registration manager can <a href="/foundation/registration_manager/containers">register 
containers for you</a>. If you aren’t using
Foundation, registering containers is relatively simple.</p>
<p>The first thing you’ll need to do is create the <code>FacadeContainerType</code> and put it 
somewhere global. For simplicity in this example I’ll put it in the mod class and
constructor, but you can put it wherever you feel works best. </p>
<pre><code class="language-java">~import com.teamwizardry.librarianlib.facade.container.FacadeContainerType;
~import net.minecraft.util.ResourceLocation;
~
public class ExampleMod {
    public static FacadeContainerType&lt;CoolContainer&gt; coolContainerType;

    public ExampleMod() {
        coolContainerType = new FacadeContainerType(CoolContainer.class);
        coolContainerType.setRegistryName(new ResourceLocation(
            &quot;examplemod:cool_container&quot;
        ));
    }
}
</code></pre>
<p>Next you need to register the type in the appropriate registry event and specify a 
<code>FacadeContainerScreen</code> type in the client setup event. In order to use a constructor
reference, the screen’s constructor should have three parameters: your container,
the player’s inventory, and the title 
(<code>CoolContainer container, PlayerInventory inventory, ITextComponent title</code>).</p>
<pre><code class="language-java">~import com.teamwizardry.librarianlib.facade.container.FacadeContainerType;
~import net.minecraft.client.gui.ScreenManager;
~import net.minecraft.inventory.container.ContainerType;
~import net.minecraft.util.ResourceLocation;
~import net.minecraftforge.api.distmarker.Dist;
~import net.minecraftforge.api.distmarker.OnlyIn;
~import net.minecraftforge.event.RegistryEvent;
~import net.minecraftforge.fml.event.lifecycle.FMLClientSetupEvent;
~
public class ExampleMod {
    public static FacadeContainerType&lt;CoolContainer&gt; coolContainerType;

    public ExampleMod() {
        coolContainerType = new FacadeContainerType(CoolContainer.class);
        coolContainerType.setRegistryName(new ResourceLocation(
            &quot;examplemod:cool_container&quot;
        ));
    }

    @SubscribeEvent
    public void registerContainers(RegistryEvent.Register&lt;ContainerType&lt;?&gt;&gt; e) {
        e.getRegistry().register(coolContainerType);
    }

    @OnlyIn(Dist.CLIENT)
    public void clientSetup(FMLClientSetupEvent e) {
        ScreenManager.registerFactory(coolContainerType, CoolContainerScreen::new);
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../facade/layers/transforms.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../facade/containers/non_inventory.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../facade/layers/transforms.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../facade/containers/non_inventory.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
